/* === Layout base === */
html, body { height: 100%; margin: 0; }
#map { height: 900px; width: 100%; }
body { font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif; }

/* Paneles */
#info-panel, #referencias, #ranking-container, #contador-poligonos {
  position: fixed;
  background: rgba(0, 0, 0, 0.85);
  color: #fff;
  padding: 12px 14px;
  border-radius: 10px;
  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  visibility: hidden;
}
#info-panel { width: 200px; top: 50%; left: 50px; transform: translateY(-50%); }
#referencias { top: 10px; left: 50px; width: 260px; max-height: 400px; overflow: auto; }
#ranking-container { top: 10px; right: 10px; width: 260px; max-height: 400px; overflow: auto; visibility: hidden; }
#toggle-referencias { visibility: hidden; }
#contador-poligonos { bottom: 10px; right: 10px; width: 240px; max-height: 400px; overflow: auto; }

.referencias { display: flex; flex-direction: column; gap: 10px; margin-top: 0; }
.referencia { display: flex; align-items: center; gap: 10px; }
.color-box { width: 18px; height: 18px; border: 1px solid #000; }
.azul { background: rgb(9, 0, 128); } .verde { background: green; }
.amarillo { background: yellow; } .rojo { background: red; }

/* Etiquetas numéricas dentro de polígonos */
.label {
  font-size: 12px !important;
  font-weight: 700;
  background: #fff;
  padding: 2px 4px;
  border-radius: 4px;
  border: 1px solid #ddd;
  color: #111;
}

/* Banner lejos */
#far-banner {
  position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
  z-index: 1300; padding: 10px 14px; border-radius: 10px;
  background: #3b1d1d; color: #ffdede; border: 1px solid #7a2e2e;
  box-shadow: 2px 2px 10px rgba(0,0,0,.5);
  display: none;
}
#far-banner strong { color:#ffb4b4; }

/* Bottom bar */
.bottom-bar {
  position: fixed; left: 0; right: 0; bottom: 0;
  background: #0a0a0a; color: #fff;
  z-index: 1400; padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
  border-top: 1px solid rgba(255,255,255,.08);
  display: flex; gap: 10px; align-items: center; justify-content: space-between; flex-wrap: wrap;
}
.bottom-bar .group { display: inline-flex; gap: 8px; align-items: center; flex: 1 1 auto; min-width: 180px; }
.bar-btn {
  appearance: none; background: #111; color: #fff;
  border: 1px solid #333; border-radius: 12px;
  min-height: 42px; padding: 8px 14px; font-weight: 700; cursor: pointer; flex: 0 0 auto;
}
.bar-btn[disabled] { opacity:.6; cursor:not-allowed; }
.bar-text { font-size: 12px; color: #bbb; white-space: nowrap; }

/* Login FAB */
.login-fab {
  position: fixed; top: 12px; right: 12px; z-index: 1500;
  background: #111; color: #fff; border: 1px solid #333;
  border-radius: 12px; padding: 10px 14px; font-weight: 700; cursor: pointer;
}

/* Account menu */
.account-menu {
  position: fixed; top: 54px; right: 12px; z-index: 1501;
  background: #0b0b0b; color: #fff; border: 1px solid #333; border-radius: 12px;
  padding: 10px; width: 220px; box-shadow: 0 6px 24px rgba(0,0,0,.35);
}
.account-menu__header { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.badge { font-size: 12px; padding: 2px 8px; border-radius: 999px; border: 1px solid #444; color:#bbb; }
.menu-item { width:100%; padding:10px 12px; border-radius:10px; border:1px solid #333; background:#111; color:#fff; cursor:pointer; }
.menu-item.danger { border-color:#7a2e2e; background:#2a1212; }

/* Modal login */
.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.5); display: none; align-items:center; justify-content:center; z-index: 1600; }
.modal-backdrop:not([hidden]) { display: flex; }
.modal {
  width: min(92vw, 360px); background: #0b0b0b; color: #fff;
  border: 1px solid #333; border-radius: 14px; padding: 16px;
}
.modal h3 { margin: 0 0 8px; font-size: 18px; }
.modal form { display: grid; gap: 10px; }
.modal input { padding: 10px 12px; border-radius: 10px; border: 1px solid #333; background: #121212; color: #fff; outline: none; width: 100%; }
.modal .row { display: flex; gap: 8px; justify-content: flex-end; }
.modal .btn { appearance: none; background: #111; color:#fff; border: 1px solid #333; border-radius: 10px; padding: 10px 14px; font-weight: 700; cursor: pointer; }
.modal .btn.primary { border-color:#2563eb; }

/* Overlay / card para formulario de territorio */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: none; align-items:center; justify-content:center; z-index: 10000; }
.overlay:not([hidden]) { display:flex; }
.card { width: min(440px,92vw); background:#fff; border-radius:12px; box-shadow: 0 10px 40px rgba(0,0,0,.35); overflow:hidden; }
.card__header { background:#111827; color:#fff; padding:10px 12px; display:flex; justify-content:space-between; align-items:center; }
.card__body { padding:12px; font-size:14px; }

/* Toast */
.toast { position:fixed; left:12px; bottom:12px; background:rgba(255,255,255,.95); padding:6px 10px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,.15); font-size:12px; z-index:10001; }
.toast[hidden] { display:none; }

/* Botón refresh */
.btn-refresh { position:fixed; right:12px; top:12px; z-index:1200; background:#2563eb; color:#fff; border:none; padding:8px 10px; border-radius:8px; font-weight:700; cursor:pointer; visibility:hidden; }

/* Weekly panel */
.weekly-panel {
  position: fixed; left: 50%; bottom: 80px; transform: translateX(-50%);
  background: #0b0b0b; color: #fff; border: 1px solid #333; border-radius: 14px; padding: 12px;
  z-index: 1502; width: min(92vw, 360px); box-shadow: 0 10px 30px rgba(0,0,0,.4);
}
.weekly-title { font-weight: 700; margin-bottom: 8px; }
.weekly-days { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.weekly-actions { margin-top: 10px; display:flex; justify-content:flex-end; }

/* Responsive */
@media (max-width: 768px) {
  #referencias, #ranking-container, #contador-poligonos, #info-panel { display: none; }
}
